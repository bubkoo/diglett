<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script src="../src/datetime.js"></script>
    <script src="../src/currency.js"></script>
    <script>
        var date = new Date();
        console.log(datetime.parse(date));

        console.log(currency.formatNumber(123456.123123));
        console.log(currency.formatNumber(1234567.123123, 2));
        console.log(currency.formatNumber(12345678.123123, 3));

        var formatted = currency.formatNumber(12345678.123123, 3);

        console.log(currency.unformat(formatted));

        console.log(currency.formatMoney(12345678.123123));
        console.log(currency.formatMoney(-12345678.123123));

        console.log(currency.toFixed(1234567.23456, 2));
        console.log(currency.toFixed(1234567.23456, 3));
        console.log(currency.toFixed(1234567.23456, 4));

        console.log(currency.toFixed(-1234567.23456, 2));
        console.log(currency.toFixed(-1234567.23456, 3));
        console.log(currency.toFixed(-1234567.23456, 4));
    </script>
</head>
<body>
<script>
    function complied(__, __method, __filter) {
        'use strict';
        __ = __ || {};
        __filter = __filter || {};
        __method = __method || {};
        var __out = '';
        var list = __.list, arrs = __.arrs, $value = __.$value, sortArr1 = __.sortArr1, sortArr2 = __.sortArr2, isAdmin = __.isAdmin, title = __.title, $index = __.$index, $idx = __.$idx, $item = __.$item, escape = __.escape, str = __.str, datetime = __.datetime, num = __.num, longStr = __.longStr, item = __.item, name = __.name, phone = __.phone, age = __.age, subtpl = __.subtpl, subdata = __.subdata;
        if (isAdmin) {
            __out += '        {{ 内联显示}} <h2>';
            __out += title;
            __out += '</h2><ul>';
            __method["each"](list, function ($value, $index, $even, $odd, $first, $last) {
                __out += '<li>索引 ';
                __out += ($index + 1);
                __out += ' ：';
                __out += $value;
                __out += '</li>';
            });
            __out += '</ul>';
        }
        __out += '<h2> 嵌套 </h2><ul>';
        __method["each"](arrs, function ($value, $index, $even, $odd, $first, $last) {
            __out += '<li><h3>类别：';
            __out += $index;
            __out += '</h3><ul>';
            __method["each"]($value, function ($item, $idx, $even, $odd, $first, $last) {
                __out += '<li>';
                __out += ($idx + 1);
                __out += ' ：';
                __out += $item;
                __out += '</li>';
            });
            __out += '</ul></li>';
        });
        __out += '</ul><h2> HTML </h2>';
        __out += __filter["uppercase"].call(this, __filter["html"].call(this, escape));
        __out += '<h2> 小写 </h2>';
        __out += __filter["lowercase"].call(this, str);
        __out += '<h2> 大写 </h2>';
        __out += __filter["uppercase"].call(this, str);
        __out += '<h2>Include 子模板</h2>';
        __out += __method["include"](subtpl, subdata);
        ;
        __out += '<h2>高级filter示例</h2><h3>日期时间</h3>';
        __out += __filter["datetime"].call(this, datetime, "ddd yyyy年MM-dd HH:mm:ss", __method["getFilterArg"](__, "asdsad"), __method["getFilterArg"](__, "asdasd"));
        __out += '<h3>数字</h3>';
        __out += __filter["number"].call(this, num, "2");
        __out += '<h3>货币</h3>';
        __out += __filter["currency"].call(this, num, "￥");
        __out += '<h3>limitTo</h3><p> 限制字符串长度：';
        __out += __filter["limitTo"].call(this, longStr);
        __out += '</p><p> 限制字符串长度：';
        __out += __filter["limitTo"].call(this, longStr, "4");
        __out += '</p><p> 限制数组长度 </p><p><ul>';
        __method["each"](__filter["limitTo"].call(this, list, "4"), function (item, $index, $even, $odd, $first, $last) {
            __out += '<li>';
            __out += item;
            __out += '</li>';
        });
        __out += '</ul></p><h3>orderBy 排序</h3><P> 原数组： </P><p>';
        __method["each"](sortArr1, function (item, $index, $even, $odd, $first, $last) {
            __out += item;
            __out += ',        ';
        });
        __out += '</p><br><p>对象数组</p><p>原对象</p><table style="border:1px solid #ddd"><tr><td style="width: 80px"> Name </td><td style="width: 140px"> Phone Number </td><td style="width: 40px"> Age </td></tr>';
        __method["each"](sortArr2, function (item, $index, $even, $odd, $first, $last) {
            __out += '<tr><td>';
            __out += item.name;
            __out += '</td><td>';
            __out += item.phone;
            __out += '</td><td>';
            __out += item.age;
            __out += '</td></tr>';
        });
        __out += '</table><p> 按 name 升序 </p><table style="border:1px solid #ddd"><tr><td style="width: 80px"> Name </td><td style="width: 140px"> Phone Number </td><td style="width: 40px"> Age </td></tr>';
        __method["each"](__filter["orderBy"].call(this, sortArr2, __method["getFilterArg"](__, "sortfield"), __method["getFilterArg"](__, "reverse")), function (item, $index, $even, $odd, $first, $last) {
            __out += '<tr><td>';
            __out += item.name;
            __out += '</td><td>';
            __out += item.phone;
            __out += '</td><td>';
            __out += item.age;
            __out += '</td></tr>';
        });
        __out += '</table><p> 按 name 升序, Phone Number 降序 </p><table style="border:1px solid #ddd"><tr><td style="width: 80px"> Name </td><td style="width: 140px"> Phone Number </td><td style="width: 40px"> Age </td></tr>';
        __method["each"](__filter["orderBy"].call(this, sortArr2, __method["getFilterArg"](__, "name"), __method["getFilterArg"](__, "-phone")), function (item, $index, $even, $odd, $first, $last) {
            __out += '<tr><td>';
            __out += item.name;
            __out += '</td><td>';
            __out += item.phone;
            __out += '</td><td>';
            __out += item.age;
            __out += '</td></tr>';
        });
        __out += '</table><br><br><br><br>';
        return __out;
    }
</script>
</body>
</html>