<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title></title>
    <script src="../src/template.0.7.js"></script>
</head>
<body>
<div id="content">
    <!--  asd -->
</div>
<script id="test" type="text/html">
    {{

    #if isAdmin

    }}

    {{!--
    注释，似曾相识
    --}}

    {{// 内联显示}}

    <h2>{{ title }}</h2>
    <ul>
        {{ #each list as $value $index}}
        <li>索引 {{ $index + 1 }} ：{{ $value }}</li>
        {{/each}}
    </ul>
    {{/if}}
    <h2>
        嵌套
    </h2>
    <ul>
        {{ #each arrs}}
        <li>
            <h3>类别：{{ $index }}</h3>
            <ul>
                {{ #each $value as $item $idx}}
                <li> {{ $idx + 1 }} ：{{ $item }}</li>
                {{/each}}
            </ul>
        </li>
        {{/each}}
    </ul>
    <h2>
        HTML
    </h2>
    {{ escape | html:     param :     'yyyy年MM月dd日 hh:mm:ss':   xxx   :"YYYY"  | uppercase}}
    <h2>
        小写
    </h2>
    {{ str | lowercase }}
    <h2>
        大写
    </h2>
    {{ str | uppercase }}
    <h2>
        日期时间
    </h2>
    {{ datetime | date:'yyyy年MM月dd日 hh:mm:ss' }}
</script>

<script>
    var data = {
        title: '基本例子',
        isAdmin: true,
        list: ['文艺', '博客', '摄影', '电影', '民谣', '旅行', '吉他'],
        arrs: {
            '前端博客': ['汤姆大叔', '寒冬 winter', '司徒正美'],
            '电影': ['大鱼', '霍比特人', '北京遇上西雅图'],
            '音乐': ['Need you now', '静静的', '暗香', '大风吹']
        },
        'escape': '<div>html</div>',
        'str': 'Hello World',
        'datetime': new Date()
    };
    var html = diglett('#test', data);

    document.getElementById('content').innerHTML = html;

</script>
<script>
    function anonymous(__, __method, __filter) {
        'use strict';
        __ = __ || {};
        __filter = __filter || {};
        __method = __method || {};
        var __out = '';
        __out += '';
        var list = __.list,
                arrs = __.arrs,
                $value = __.$value,
                isAdmin = __.isAdmin,
                title = __.title,
                $index = __.$index,
                $idx = __.$idx,
                $item = __.$item,
                escape = __.escape;

        __out += '     ';
        if (isAdmin) {
            __out += '            {{ 内联显示}}      <h2>';
            __out += title;
            __out += '</h2>     <ul>         ';
            __method["each"](list, function ($data, $value, $index) {
                __out += '         <li>索引 ';
                __out += $index + 1;
                __out += ' ：';
                __out += $value;
                __out += '</li>         ';
            });
            __out += '     </ul>     ';
        }
        __out += '     <h2>         嵌套     </h2>     <ul>         ';
        __method["each"](arrs, function ($data, $value, $index) {
            __out += '         <li>             <h3>类别：';
            __out += $index;
            __out += '</h3>             <ul>                 ';
            __method["each"]($value, function ($data, $item, $idx) {
                __out += '                 <li> ';
                __out += $idx + 1;
                __out += ' ：';
                __out += $item;
                __out += '</li>                 ';
            });
            __out += '             </ul>         </li>         ';
        });
        __out += '     </ul>     <h2>         HTML     </h2>     ';
        __out += __filter["html"].call(this, escape, "param");
        __out += ' ';
        return __out.replace(/[\r\n]\s+[\r\n]/g, '\r\n');
    }
</script>
</body>
</html>